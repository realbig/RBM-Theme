/*
The static site header.

@since 0.1.0
*/
@import "../settings";

$background: $dark-color;
$logo-size: 100px;
$circular-nav-size: $logo-size * 3;
$menu-item-color: #ddd;
$gutter: 20px;
$title-height: 130px;

// Admin bar compensation
body.admin-bar {
  #wrapper {
    &.reveal {
      #site-header {
        top: 32px;
      }
    }
    #site-header {
      top: -$title-height + 32;
    }
  }
}

// Reveal
#wrapper.reveal {

  #site-header {
    top: 0;

    .site-logo {
      .rbm-logo-svg {
        .light-bulb {
          fill: lighten($primary-color, 10%);
          transition: fill 1s, transform 500ms;
        }

        .light-bulb-blur {
          opacity: 1;
          transition: fill 1s, transform 500ms;
        }

        .gear {
          fill: $secondary-color;
          transform: rotate(360deg);
        }
      }
    }

    .site-nav-circular {
      transform: scale(1);
      display: block;
    }
  }

  #back-cover {
    visibility: visible;
    opacity: 0.5;
  }
}

#site-header {
  position: fixed;
  top: -$title-height;
  left: 0;
  right: 0;
  height: $header-height + $title-height;
  line-height: $header-height;
  background: $background;
  z-index: 100;
  transition: top 500ms;

  // Title
  .site-title {
    line-height: 45px;
    height: $title-height;
    padding-top: 15px;
    color: #fff;
    text-align: center;
    text-transform: uppercase;
    margin: 0;
    position: relative;
    z-index: 10;

    a {
      @extend .no-effect;
      color: inherit;
    }
  }

  // Logo
  .site-logo {
    width: $logo-size;
    height: $logo-size;
    padding: $logo-size / 10;
    border-radius: 50%;
    background: $background;
    cursor: pointer;
    position: absolute;
    left: 50%;
    margin-left: $logo-size / 2 * -1;
    z-index: 10;

    &:hover {
      .light-bulb, .light-bulb-blur {
        transform: scale(1.1, 1.1);
      }
    }

    .rbm-logo-svg {
      width: 100%;
      height: 100%;
      overflow: visible;

      .light-bulb {
//        fill: lighten($background, 20%);
        fill: $menu-item-color;
        transition: fill 4s, transform 500ms;
        transform-origin: 50% 50%;
      }

      .light-bulb-blur {
//        fill: $primary-color;
        fill: lighten($primary-color, 20%);
        opacity: 0;
        transition: opacity 4s, transform 500ms;
        transform-origin: 50% 50%;
      }

      .gear {
//        fill: lighten($background, 25%);
        fill: $menu-item-color;
        transition: fill 1s, transform 500ms;
        transform-origin: 50% 55%;
      }
    }
  }

  // Navigation Menus
  .site-nav-left, .site-nav-right {
    font-family: $header-font-family;
    letter-spacing: $header-letter-spacing;
    text-transform: uppercase;
    position: absolute;
    width: 45%;
    z-index: 10;

    .menu {
      list-style: none;
      margin: 0;
    }

    .menu-item {
      display: inline-block;
      color: $menu-item-color;
      line-height: $header-height;
      padding: 0 $gutter;

      a {
        @extend .force-color;
        &:before, &:after {
          background: $menu-item-color !important;
        }
      }
    }
  }

  .site-nav-left {
    text-align: right;
    left: 0;
  }

  .site-nav-right {
    text-align: left;
    right: 0;
  }
}

// Circular site nav
.site-nav-circular {
  position: absolute;
  left: 50%;
  top: $title-height - $logo-size;
  overflow: hidden;
  transform: scale(0.1);
  z-index: 5;

  .menu {
    list-style: none;
    margin: 0;

    .menu-item {

      &:before {
        display: none;
      }

      a {
        display: block;
        width: 100%;
        height: 100%;
        background: $primary-color;
        position: relative;
        color: #fff;

        // Override link effects
        &:before, &:after {
          display: none;
        }

        &:hover {
          background: lighten($primary-color, 10%) !important;
        }

        span {
          display: block;
          text-align: center;
          position: absolute;
          color: transparent;
          font-size: 2em;

          &:before {
            position: absolute;
            left: 50%;
            margin-left: -7px;
            color: #fff;
          }
        }
      }

      // Color every other menu item
      &:nth-child(odd) {
        a {
          background: lighten($primary-color, 5%);
        }
      }

      // Supported icons
      &.icon-home {
        span {
          @extend .icon-home;
        }
      }
      &.icon-cog {
        span {
          @extend .icon-cog;
        }
      }
      &.icon-phone {
        span {
          @extend .icon-phone;
        }
      }
      &.icon-mail {
        span {
          @extend .icon-mail;
        }
      }
      &.icon-office {
        span {
          @extend .icon-office;
        }
      }
    }
  }
}

.csstransforms .site-nav-circular {
  width: $circular-nav-size;
  height: $circular-nav-size;
  position: absolute;
  left: 50%;
  margin-left: -$circular-nav-size / 2;
  top: $title-height - $logo-size;
  border-radius: 50%;
  overflow: hidden;
  transition: transform 500ms;
  z-index: 5;

  .menu {
    .menu-item {
      position: absolute;
      width: $circular-nav-size / 2;
      height: $circular-nav-size / 2;
      transform-origin: 100% 100%;

      a {
        span {
          transform: skew(-54deg) rotate(-72deg) scale(-1);
          bottom: 27px;
          left: 58px;
          right: 0;
        }
      }

      // Position menu items
      &:first-child {
        transform: rotate(180deg) skew(54deg);
      }

      &:nth-child(2) {
        transform: rotate(216deg) skew(54deg);
      }

      &:nth-child(3) {
        transform: rotate(252deg) skew(54deg)
      }

      &:nth-child(4) {
        transform: rotate(288deg) skew(54deg);
      }

      &:nth-child(5) {
        transform: rotate(324deg) skew(54deg);
      }
    }
  }
}

.no-csstransforms .site-nav-circular {
  height: $circular-nav-size / 4;
  width: ($circular-nav-size / 4) * 5;
  margin-left: ($circular-nav-size / 4) * 2.5 * -1;
  top: $logo-size + $title-height;
  display: none;

  .menu {
    .menu-item {
      float: left;
      width: $circular-nav-size / 4;
      height: $circular-nav-size / 4;

      a {
        span {
          left: 0;
          right: 15px;
          top: 19px;
        }
      }
    }
  }
}

// Cover
#back-cover {
  background: #000;
  opacity: 0;
  visibility: hidden;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 5;
  transition: opacity 500ms, visibility 500ms;
}

// Animations
@keyframes light-bulb-flicker {
  0% {
    fill: lighten($background, 20%);
  }

  5% {
    fill: lighten($background, 20%);
  }
  7% {
    fill: $primary-color;
  }
  9% {
    fill: lighten($background, 20%);
  }

  15% {
    fill: lighten($background, 20%);
  }
  17% {
    fill: $primary-color;
  }
  19% {
    fill: lighten($background, 20%);
  }

  23% {
    fill: lighten($background, 20%);
  }
  25% {
    fill: $primary-color;
  }
  27% {
    fill: lighten($background, 20%);
  }

  45% {
    fill: lighten($background, 20%);
  }
  47% {
    fill: $primary-color;
  }
  49% {
    fill: lighten($background, 20%);
  }

  66% {
    fill: lighten($background, 20%);
  }
  68% {
    fill: $primary-color;
  }
  70% {
    fill: lighten($background, 20%);
  }

  74% {
    fill: lighten($background, 20%);
  }
  76% {
    fill: $primary-color;
  }
  78% {
    fill: lighten($background, 20%);
  }
}